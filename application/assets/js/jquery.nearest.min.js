/*!
 * jQuery Nearest plugin v1.3-alpha
 *
 * Finds elements closest to a single point based on screen location and pixel dimensions
 * http://gilmoreorless.github.io/jquery-nearest/
 * Open source under the MIT licence: http://gilmoreorless.mit-license.org/2011/
 *
 * Requires jQuery 1.4 or above
 * Also supports Ben Alman's "each2" plugin for faster looping (if available)
 */
!function(t,e){function n(e,n,h){e||(e="div");var i,o,a=t(n.container),c=a.offset()||{left:0,top:0},s=[c.left+a.width(),c.top+a.height()],f={x:0,y:1,w:0,h:1};for(i in f)f.hasOwnProperty(i)&&(o=r.exec(n[i]),o&&(n[i]=s[f[i]]*o[1]/100));var u=a.find(e),l=[],d=!!n.furthest,p=!!n.checkHoriz,y=!!n.checkVert,v=d?0:1/0,x=parseFloat(n.x)||0,g=parseFloat(n.y)||0,k=parseFloat(x+n.w)||x,w=parseFloat(g+n.h)||g,F=n.tolerance||0,H=!!t.fn.each2,S=Math.min,m=Math.max;!n.includeSelf&&h&&(u=u.not(h)),0>F&&(F=0),u[H?"each2":"each"](function(e,r){var h,i,o,a,c=H?r:t(this),s=c.offset(),f=s.left,u=s.top,M=c.outerWidth(),j=c.outerHeight(),z=f+M,O=u+j,P=m(f,x),V=S(z,k),W=m(u,g),X=S(O,w),Y=V>=P,b=X>=W;(p&&y||!p&&!y&&Y&&b||p&&b||y&&Y||p&&n.onlyX||y&&n.onlyY)&&(h=Y?0:P-V,i=b?0:W-X,o=n.onlyX?h:n.onlyY?i:Y||b?m(h,i):Math.sqrt(h*h+i*i),a=d?o>=v-F:v+F>=o,a&&(v=d?m(v,o):S(v,o),l.push({node:this,dist:o})))});var M,j,z,O,P=l.length,V=[];if(P)for(d?(M=v-F,j=v):(M=v,j=v+F),z=0;P>z;z++)O=l[z],O.dist>=M&&O.dist<=j&&V.push(O.node);return V}var r=/^([\d.]+)%$/;t.each(["nearest","furthest","touching"],function(r,h){var i={x:0,y:0,w:0,h:0,tolerance:1,container:document,furthest:"furthest"==h,includeSelf:!1,checkHoriz:"touching"!=h,checkVert:"touching"!=h};t[h]=function(r,h,o){if(!r||r.x===e||r.y===e)return t([]);var a=t.extend({},i,r,o||{});return t(n(h,a))},t.fn[h]=function(e,r){var h;if(e&&t.isPlainObject(e))return h=t.extend({},i,e,r||{}),this.pushStack(n(this,h));var o=this.offset(),a={x:o.left,y:o.top,w:this.outerWidth(),h:this.outerHeight()};return h=t.extend({},i,a,r||{}),this.pushStack(n(e,h,this))}})}(jQuery);